(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(85)}])},85:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(5893),s=n(3425),l=n(8965),i=n(1664),c=n.n(i),r=n(1481),o=n(7294),d=n(1259),m=n(1019),u=n(2606),x=n(7106),h=n(4819),p=n(3067),y=n(1163);function f(e){let{href:t,children:n,target:s,onClick:l}=e;return t?(0,a.jsx)("a",{href:t,target:s,onClick:l,children:n}):(0,a.jsx)(a.Fragment,{children:n})}let b={0:"bg-zinc-50",1:"bg-yellow-200",2:"bg-green-200"};function v(e,t,n){return"".concat(e.shortname," ").concat(t.name||t.year," ").concat(n.name||n.index)}function j(e,t){if("increment"==t.type){let n=Object.keys(b).length;return e[t.payload]||(e[t.payload]=0),{...e,[t.payload]:(e[t.payload]+1)%n}}return"update"==t.type?{...e,...t.payload}:t.payload}function g(){let[e,t]=(0,o.useReducer)(j,{}),[n,i]=(0,o.useState)(),[g,N]=(0,o.useState)([]),[k,w]=(0,o.useState)(!1),[C,_]=(0,o.useState)(""),[O,S]=(0,o.useState)(""),[Z,E]=(0,o.useState)(""),[M,P]=(0,o.useState)({}),T=(0,y.useRouter)();return(0,o.useEffect)(()=>{(0,d.Aj)(r.I,e=>{console.log("run");let n=window.location.origin?window.location.origin:"";T.query.user?(w(!0),S("".concat(n).concat(T.basePath||"/","?user=").concat(T.query.user)),(0,m.jM)((0,m.iH)(r.db,"profile/".concat(T.query.user)),e=>{e.exists()&&(e.val().hiddenContests&&N(Object.keys(e.val().hiddenContests)),e.val().displayName&&_(e.val().displayName))},{onlyOnce:!0}),(0,m.jM)((0,m.iH)(r.db,"solved/".concat(T.query.user)),e=>{e.exists()&&t({type:"set",payload:e.val()})},{onlyOnce:!0})):e&&(i(e),S("".concat(n).concat(T.basePath||"/","?user=").concat(e.uid)),(0,m.jM)((0,m.iH)(r.db,"profile/".concat(e.uid,"/hiddenContests")),e=>{e.exists()&&N(Object.keys(e.val()))},{onlyOnce:!0}),(0,m.jM)((0,m.iH)(r.db,"solved/".concat(e.uid)),e=>{e.exists()&&(P(e.val()),t({type:"set",payload:e.val()}))},{onlyOnce:!0}))})},[T]),(0,a.jsxs)("main",{children:[(0,a.jsx)(s.Z,{}),(0,a.jsxs)("div",{className:"py-4 px-4 sm:px-10 md:px-20",children:[(0,a.jsx)("h1",{className:"font-bold text-3xl text-center",children:k?C?"Viewing ".concat(C,"'s Checklist"):"Viewing User's Checklist":(null==n?void 0:n.displayName)?"".concat(n.displayName,"'s Checklist"):"My Checklist"}),(0,a.jsxs)("div",{className:"text-center mt-2",children:[n?null:(0,a.jsx)("div",{children:"Sign in to save your progress!"}),(0,a.jsx)("div",{children:Z})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row-reverse mt-4",children:[(0,a.jsxs)(u.v,{as:"div",className:"relative inline-block mx-2 my-1 sm:my-0",children:[(0,a.jsxs)(u.v.Button,{className:"inline-flex w-full justify-center rounded-md bg-black bg-opacity-30 px-4 py-2 text-sm font-bold text-white hover:bg-opacity-40 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:["Jump To",(0,a.jsx)(h,{className:"ml-2 -mr-1 h-5 w-5 text-violet-200 hover:text-violet-100","aria-hidden":"true"})]}),(0,a.jsx)(x.u,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(u.v.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,a.jsx)("div",{className:"px-1 py-1",children:l.Z.filter(e=>!g.includes(e.shortname)).map(e=>(0,a.jsx)(u.v.Item,{children:(0,a.jsxs)(c(),{href:"#".concat(e.shortname.toLowerCase()),className:"text-gray-900 group flex w-full items-center rounded-md px-2 py-2 text-sm",children:[e.name," (",e.shortname,")"]})},e.shortname))})})})]}),n&&!k?(0,a.jsx)(p.Z,{onClick:()=>{!function(){let t={};for(let[n,a]of Object.entries(e))if(M[n]!=a){if(!M[n]&&0==a)continue;t[n]=a||null}(0,m.Vx)((0,m.iH)(r.db,"solved/".concat(n.uid)),t)}()},className:"bg-green-600 mx-2 my-1 sm:my-0",children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Save"})}):null,k?(0,a.jsx)(p.Z,{className:"bg-blue-600 mx-2 my-1 sm:my-0",onClick:()=>{T.push("/"),w(!1)},children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Go Back to My Checklist"})}):null,O?(0,a.jsx)(p.Z,{onClick:()=>{navigator.clipboard.writeText(O),E("Copied to clipboard!")},className:"bg-blue-600 mx-2 my-1 sm:my-0",children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Copy Sharable Link"})}):null]}),l.Z.filter(e=>!g.includes(e.shortname)).map(s=>(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("h2",{className:"font-bold text-2xl"+(s.url?" text-blue-500":""),id:s.shortname.toLowerCase(),children:(0,a.jsx)(f,{href:s.url,target:"_blank",children:s.name})}),(0,a.jsx)("table",{className:"table-auto w-full",children:(0,a.jsx)("tbody",{children:s.years.map(i=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"cell font-bold"+(i.url?" text-blue-500":"")+(!function(t){if(!t.problems.length)return!1;let n=!1;for(let a of t.problems)if(2!=e[v(l.Z[0],t,a)]){n=!0;break}return!n}(i)?" bg-zinc-100":" ".concat(b[2])),children:(0,a.jsx)(f,{href:i.url,target:"_blank",children:i.name?i.name:"".concat(s.shortname," ").concat(i.year)})}),i.problems.map(l=>(0,a.jsx)("td",{id:v(s,i,l),className:"cell cell-problem"+(l.url?" text-blue-500":"")+" "+b[e[v(s,i,l)]||0],onClick:()=>{!k&&n&&t({type:"increment",payload:v(s,i,l)})},children:(0,a.jsx)(f,{href:l.url,target:"_blank",onClick:e=>{e.stopPropagation()},children:l.name?l.name:"P".concat(l.index)})},l.name||l.index))]},i.name?i.name:"".concat(s.shortname," ").concat(i.year)))})})]},s.name))]})]})}}},function(e){e.O(0,[627,70,462,164,802,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(85)}])},85:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(5893),n=t(3425),l=t(8965),i=t(1664),r=t.n(i),c=t(1481),o=t(7294),d=t(1259),m=t(1019),u=t(2606),h=t(7106),x=t(4819),p=t(3067),y=t(1163);function f(e){let{href:s,children:t,target:n,onClick:l,className:i}=e;return s?(0,a.jsx)("a",{href:s,target:n,onClick:l,className:i,children:t}):(0,a.jsx)("span",{className:i,children:t})}let b={0:"bg-zinc-50",1:"bg-yellow-200",2:"bg-green-200"};function v(e,s,t){return"".concat(e.shortname," ").concat(s.name||s.year," ").concat(t.name||t.index)}function j(e,s){if("increment"==s.type){let t=Object.keys(b).length;return e[s.payload]||(e[s.payload]=0),{...e,[s.payload]:(e[s.payload]+1)%t}}return"update"==s.type?{...e,...s.payload}:s.payload}function g(){let[e,s]=(0,o.useReducer)(j,{}),[t,i]=(0,o.useState)(),[g,N]=(0,o.useState)([]),k=parseInt("15"),[w,C]=(0,o.useState)(k),[_,O]=(0,o.useState)(!1),[S,E]=(0,o.useState)("User"),[M,P]=(0,o.useState)(""),[T,Z]=(0,o.useState)(""),[F,H]=(0,o.useState)({}),Y=(0,y.useRouter)();return(0,o.useEffect)(()=>{(0,d.Aj)(c.I,e=>{console.log("run");let t=window.location.origin?window.location.origin:"";Y.query.user?(O(!0),P("".concat(t).concat(Y.basePath||"/","?user=").concat(Y.query.user)),(0,m.jM)((0,m.iH)(c.db,"profile/".concat(Y.query.user)),e=>{e.exists()&&(e.val().hiddenContests?N(Object.keys(e.val().hiddenContests)):N([]),e.val().displayName?E(e.val().displayName):E("User"),e.val().shownYears?C(e.val().shownYears):C(k))},{onlyOnce:!0}),(0,m.jM)((0,m.iH)(c.db,"solved/".concat(Y.query.user)),e=>{e.exists()?s({type:"set",payload:e.val()}):s({type:"set",payload:{}})},{onlyOnce:!0})):e?(i(e),P("".concat(t).concat(Y.basePath||"/","?user=").concat(e.uid)),(0,m.jM)((0,m.iH)(c.db,"profile/".concat(e.uid)),e=>{e.exists()&&(e.val().hiddenContests?N(Object.keys(e.val().hiddenContests)):N([]),e.val().shownYears?C(e.val().shownYears):C(k))},{onlyOnce:!0}),(0,m.jM)((0,m.iH)(c.db,"solved/".concat(e.uid)),e=>{e.exists()?(H(e.val()),s({type:"set",payload:e.val()})):(H({}),s({type:"set",payload:{}}))},{onlyOnce:!0})):(H({}),s({type:"set",payload:{}}),i(void 0),P(""),N([]),C(k))})},[Y]),(0,a.jsxs)("main",{children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"py-4 px-4 sm:px-10 md:px-20",children:[(0,a.jsx)("h1",{className:"font-bold text-3xl text-center",children:_?"Viewing ".concat(S,"'s Checklist"):(null==t?void 0:t.displayName)?"".concat(t.displayName,"'s Checklist"):"My Checklist"}),(0,a.jsxs)("div",{className:"text-center mt-2",children:[t?null:(0,a.jsx)("div",{children:"Sign in to save your progress!"}),(0,a.jsx)("div",{children:T})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row-reverse mt-4",children:[(0,a.jsxs)(u.v,{as:"div",className:"relative inline-block mx-2 my-1 sm:my-0",children:[(0,a.jsxs)(u.v.Button,{className:"inline-flex w-full justify-center rounded-md bg-black bg-opacity-30 px-4 py-2 text-sm font-bold text-white hover:bg-opacity-40 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:["Jump To",(0,a.jsx)(x,{className:"ml-2 -mr-1 h-5 w-5 text-violet-200 hover:text-violet-100","aria-hidden":"true"})]}),(0,a.jsx)(h.u,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(u.v.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,a.jsx)("div",{className:"px-1 py-1",children:l.Z.filter(e=>!g.includes(e.shortname)).map(e=>(0,a.jsx)(u.v.Item,{children:(0,a.jsxs)(r(),{href:"#".concat(e.shortname.toLowerCase()),className:"text-gray-900 group flex w-full items-center rounded-md px-2 py-2 text-sm",children:[e.name," (",e.shortname,")"]})},e.shortname))})})})]}),t&&!_?(0,a.jsx)(p.Z,{onClick:()=>{!function(){let s={};for(let[t,a]of Object.entries(e))if(F[t]!=a){if(!F[t]&&0==a)continue;s[t]=a||null}(0,m.Vx)((0,m.iH)(c.db,"solved/".concat(t.uid)),s)}()},className:"bg-green-600 mx-2 my-1 sm:my-0",children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Save"})}):null,_?(0,a.jsx)(p.Z,{className:"bg-blue-600 mx-2 my-1 sm:my-0",onClick:()=>{Y.push("/"),O(!1)},children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Go Back to My Checklist"})}):null,M?(0,a.jsx)(p.Z,{onClick:()=>{navigator.clipboard.writeText(M),Z("Copied to clipboard!")},className:"bg-blue-600 mx-2 my-1 sm:my-0",children:(0,a.jsx)("div",{className:"px-2 sm:px-8",children:"Copy Sharable Link"})}):null]}),l.Z.filter(e=>!g.includes(e.shortname)).map(n=>(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("h2",{className:"font-bold text-2xl"+(n.url?" text-blue-500":""),id:n.shortname.toLowerCase(),children:(0,a.jsx)(f,{href:n.url,target:"_blank",children:n.name})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("table",{className:"table-auto w-full",children:(0,a.jsx)("tbody",{children:n.years.filter(e=>!e.year||e.year>new Date().getFullYear()-w).map(l=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"cell"+(!function(s,t){if(!t.problems.length)return!1;let a=!1;for(let n of t.problems)if(!e[v(s,t,n)]||2!=e[v(s,t,n)]){a=!0;break}return!a}(n,l)?" bg-zinc-100":" ".concat(b[2])),children:[(0,a.jsx)(f,{href:l.url,target:"_blank",className:l.url?"text-blue-500 font-bold":"font-bold",children:l.name?l.name:"".concat(n.shortname," ").concat(l.year)})," ",l.links?(0,a.jsxs)(a.Fragment,{children:["(",Object.keys(l.links).map((e,s)=>(0,a.jsxs)("span",{children:[(0,a.jsx)(f,{href:l.links[e],target:"_blank",className:"text-blue-500",children:e}),s==Object.keys(l.links).length-1?"":", "]},e)),")"]}):null]}),l.problems.map(i=>(0,a.jsx)("td",{id:v(n,l,i),className:"cell cell-problem"+(i.url?" text-blue-500":"")+" "+b[e[v(n,l,i)]||0],onClick:()=>{!_&&t&&s({type:"increment",payload:v(n,l,i)})},children:(0,a.jsx)(f,{href:i.url,target:"_blank",onClick:e=>{e.stopPropagation()},children:i.name?i.name:"P".concat(i.index)})},i.name||i.index))]},l.name?l.name:"".concat(n.shortname," ").concat(l.year)))})})})]},n.name))]})]})}}},function(e){e.O(0,[627,70,462,164,802,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
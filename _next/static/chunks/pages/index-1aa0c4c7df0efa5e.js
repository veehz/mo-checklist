(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(6887)}])},6887:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(4848),n=a(8358),l=a(6128),r=a(1106),o=a.n(r),i=a(6271),c=a(6540),d=a(9640),u=a(9141),m=a(8679),h=a(6616),x=a(721),p=a(361),y=a(6715);function b(e){let{href:t,children:a,target:n,onClick:l,className:r}=e;return t?(0,s.jsx)("a",{href:t,target:n,onClick:l,className:r,children:a}):(0,s.jsx)("span",{className:r,children:a})}let f={0:"bg-zinc-50",1:"bg-yellow-200",2:"bg-green-200"};function v(e,t,a){return"".concat(t.name||"".concat(e.shortname," ").concat(t.year)," ").concat(a.name||a.index)}function g(e,t){if("increment"==t.type){let a=Object.keys(f).length;return e[t.payload]||(e[t.payload]=0),{...e,[t.payload]:(e[t.payload]+1)%a}}return"update"==t.type?{...e,...t.payload}:t.payload}function j(){let e=(0,y.useRouter)(),[t,a]=(0,c.useReducer)(g,{}),[r,j]=(0,c.useState)(),[w,N]=(0,c.useState)([]),k=parseInt("15"),[C,S]=(0,c.useState)(k),[_,O]=(0,c.useState)(!1),[E,A]=(0,c.useState)("User"),[R,L]=(0,c.useState)(""),[P,T]=(0,c.useState)(""),[Y,q]=(0,c.useState)({}),[F,K]=(0,c.useState)(!1);async function W(){let e={};for(let[a,s]of Object.entries(t))if(Y[a]!=s){if(!Y[a]&&0==s)continue;e[a]=s||null}try{await (0,u.yo)((0,u.KR)(i.db,"solved/".concat(r.uid)),e),K(!1),T("Saved!")}catch(e){T("Error saving!")}}return(0,c.useEffect)(()=>{let t="You have unsaved changes. Are you sure you want to leave?",a=e=>((e||window.event).returnValue=t,t),s=a=>{if(e.pathname!==a&&!confirm(t))throw e.events.emit("routeChangeError"),'Route change to "'.concat(a,'" was aborted (this error can be safely ignored). See https://github.com/vercel/next.js/discussions/32231.')};F?(window.addEventListener("beforeunload",a),e.events.on("routeChangeStart",s)):(window.removeEventListener("beforeunload",a),e.events.off("routeChangeStart",s))},[F,e]),(0,c.useEffect)(()=>{(0,d.hg)(i.j,t=>{console.log("run");let s=window.location.origin?window.location.origin:"";e.query.user?(O(!0),L("".concat(s).concat(e.basePath||"/","?user=").concat(e.query.user)),(0,u.Zy)((0,u.KR)(i.db,"profile/".concat(e.query.user)),e=>{e.exists()&&(e.val().hiddenContests?N(Object.keys(e.val().hiddenContests)):N([]),e.val().displayName?A(e.val().displayName):A("User"),e.val().shownYears?S(e.val().shownYears):S(k))},{onlyOnce:!0}),(0,u.Zy)((0,u.KR)(i.db,"solved/".concat(e.query.user)),e=>{e.exists()?a({type:"set",payload:e.val()}):a({type:"set",payload:{}})},{onlyOnce:!0})):t?(j(t),L("".concat(s).concat(e.basePath||"/","?user=").concat(t.uid)),(0,u.Zy)((0,u.KR)(i.db,"profile/".concat(t.uid)),e=>{e.exists()&&(e.val().hiddenContests?N(Object.keys(e.val().hiddenContests)):N([]),e.val().shownYears?S(e.val().shownYears):S(k))},{onlyOnce:!0}),(0,u.Zy)((0,u.KR)(i.db,"solved/".concat(t.uid)),e=>{e.exists()?(q(e.val()),a({type:"set",payload:e.val()})):(q({}),a({type:"set",payload:{}}))},{onlyOnce:!0})):(q({}),a({type:"set",payload:{}}),j(void 0),L(""),N([]),S(k))})},[e,k]),(0,s.jsxs)("main",{children:[(0,s.jsx)(n.A,{}),(0,s.jsxs)("div",{className:"py-4 px-4 sm:px-10 md:px-20",children:[(0,s.jsx)("h1",{className:"font-bold text-3xl text-center",children:_?"Viewing ".concat(E,"'s Checklist"):(null==r?void 0:r.displayName)?"".concat(r.displayName,"'s Checklist"):"My Checklist"}),(0,s.jsxs)("div",{className:"text-center mt-2",children:[r?null:(0,s.jsxs)("div",{children:[(0,s.jsx)(o(),{href:"/login",className:"text-blue-500",children:"Sign in"})," ","to save your progress on each question!"]}),(0,s.jsx)("div",{children:P})]}),(0,s.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row-reverse mt-4",children:[(0,s.jsxs)(m.W1,{as:"div",className:"relative inline-block mx-2 my-1 sm:my-0",children:[(0,s.jsxs)(m.W1.Button,{className:"inline-flex w-full justify-center rounded-md bg-black bg-opacity-30 px-4 py-2 text-sm font-bold text-white hover:bg-opacity-40 focus:outline-hidden focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:["Jump To",(0,s.jsx)(x.A,{className:"ml-2 -mr-1 h-5 w-5 text-violet-200 hover:text-violet-100","aria-hidden":"true"})]}),(0,s.jsx)(h.e,{as:c.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(m.W1.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-hidden",children:(0,s.jsx)("div",{className:"px-1 py-1",children:l.A.filter(e=>!w.includes(e.shortname)).map(e=>(0,s.jsx)(m.W1.Item,{children:(0,s.jsxs)(o(),{href:"#".concat(e.shortname.toLowerCase()),className:"text-gray-900 group flex w-full items-center rounded-md px-2 py-2 text-sm",children:[e.name," (",e.shortname,")"]})},e.shortname))})})})]}),r&&!_?(0,s.jsx)(p.A,{onClick:()=>{W()},className:"bg-green-600 mx-2 my-1 sm:my-0",children:(0,s.jsx)("div",{className:"px-2 sm:px-8",children:"Save"})}):null,_?(0,s.jsx)(p.A,{className:"bg-blue-600 mx-2 my-1 sm:my-0",onClick:()=>{e.push("/"),O(!1)},children:(0,s.jsx)("div",{className:"px-2 sm:px-8",children:"Go Back to My Checklist"})}):null,R?(0,s.jsx)(p.A,{onClick:()=>{navigator.clipboard.writeText(R),T((0,s.jsxs)("div",{children:["Copied to clipboard!"," ",(0,s.jsx)(o(),{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:R,children:"Link"})]}))},className:"bg-blue-600 mx-2 my-1 sm:my-0",children:(0,s.jsx)("div",{className:"px-2 sm:px-8",children:"Copy Sharable Link"})}):null]}),l.A.filter(e=>!w.includes(e.shortname)).map(e=>(0,s.jsxs)("div",{className:"my-4",children:[(0,s.jsx)("h2",{className:"font-bold text-2xl"+(e.url?" text-blue-500":""),id:e.shortname.toLowerCase(),children:(0,s.jsx)(b,{href:e.url,target:"_blank",children:e.name})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("table",{className:"table-auto w-full",children:(0,s.jsx)("tbody",{children:e.years.filter(e=>!e.year||e.year>new Date().getFullYear()-C).map(n=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"cell"+(!function(e,a){if(!a.problems.length)return!1;let s=!1;for(let n of a.problems)if(!t[v(e,a,n)]||2!=t[v(e,a,n)]){s=!0;break}return!s}(e,n)?" bg-zinc-100":" ".concat(f[2])),children:[(0,s.jsx)(b,{href:n.url,target:"_blank",className:n.url?"text-blue-500 font-bold":"font-bold",children:n.name?"".concat(n.name," ").concat(n.description||""):"".concat(e.shortname," ").concat(n.year," ").concat(n.description||"")})," ",n.links?(0,s.jsxs)(s.Fragment,{children:["(",Object.keys(n.links).map((e,t)=>(0,s.jsxs)("span",{children:[(0,s.jsx)(b,{href:n.links[e],target:"_blank",className:"text-blue-500",children:e}),t==Object.keys(n.links).length-1?"":", "]},e)),")"]}):null]}),n.problems.map(l=>(0,s.jsx)("td",{id:v(e,n,l),className:"cell cell-problem"+(l.url?" text-blue-500":"")+" "+f[t[v(e,n,l)]||0],onClick:()=>{!_&&r&&(K(!0),a({type:"increment",payload:v(e,n,l)}))},children:(0,s.jsx)(b,{href:l.url,target:"_blank",onClick:e=>{e.stopPropagation()},children:l.name?l.name:"P".concat(l.index)})},l.name||l.index))]},n.name?"".concat(n.name," ").concat(n.description||""):"".concat(e.shortname," ").concat(n.year," ").concat(n.description||"")))})})})]},e.name))]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[505,308,348,564,287,633,636,593,792],()=>t(2022)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2837:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(7702)}])},8965:function(e,t){"use strict";function s(e,t,s){for(let r of e)if(r[t]===s)return r;return null}let r=function(){let e=[];return e.push({name:"International Mathematical Olympiad",shortname:"IMO",url:"http://www.imo-official.org/",years:Array.from({length:64},(e,t)=>{let s=2022-t;return{year:s,url:"https://www.imo-official.org/year_info.aspx?year=".concat(s),problems:[1,2,3,4,5,6].map(e=>({index:e,url:"https://artofproblemsolving.com/wiki/index.php/".concat(s,"_IMO_Problems/Problem_").concat(e)}))}})}),s(s(e,"shortname","IMO").years,"year",1980).problems=[],s(s(e,"shortname","IMO").years,"year",1980).url="https://artofproblemsolving.com/wiki/index.php/1980_IMO",!function(){let t=[{year:2021,link:"https://artofproblemsolving.com/community/c3080392_2021_isl",num:[8,8,8,8]},{year:2020,link:"https://artofproblemsolving.com/community/c2409205_2020_isl",num:[8,8,9,7]},{year:2019,link:"https://artofproblemsolving.com/community/c1308102_2019_isl",num:[7,9,8,8]}],s={name:"International Mathematical Olympiad Shortlist",shortname:"IMOSL",url:"https://artofproblemsolving.com/community/c3223",years:[]},r=["A","C","G","N"];for(let e in t){let a=t[e].year;for(let n=0;n<4;n++){let o={name:"IMOSL ".concat(a," (").concat(r[n],")"),pdf:"https://www.imo-official.org/problems/IMO".concat(a,"SL.pdf"),url:t[e].link,problems:[]};for(let s=0;s<t[e].num[n];s++)o.problems.push({name:"".concat(r[n]).concat(s+1),index:s+1});s.years.push(o)}}e.push(s)}(),e}();t.Z=r},3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(5893);function a(e){let{children:t,isLoading:s=!1,props:a={},className:n="",flex:o=!0,full:i=!1,disabled:l=!1,onClick:c}=e;return(0,r.jsxs)("button",{onClick:c,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(n.includes("bg-")?"":"bg-indigo-600 ")+(i?"w-full ":"")+(o?"flex ":"")+n,disabled:s||l,...a,children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(s?"":" hidden"),viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},3425:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var r=s(5893),a=s(1664),n=s.n(a),o=s(1163),i=s(7294),l=s(1259),c=s(1481);function d(){let[e,t]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=()=>{window.pageYOffset>100?t(!1):t(!0)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]);let s=()=>{"scrollBehavior"in document.documentElement.style?document.documentElement.scrollTo({top:0,behavior:"smooth"}):document.documentElement.scrollTop=0};return(0,r.jsx)("div",{id:"back-to-top",className:"".concat(e?"opacity-0 bottom-[-40px] pointer-events-none":"opacity-100 bottom-5"," bg-gray-300 rounded-full shadow-md text-red-600 cursor-pointer fixed right-5 transition-all duration-300 z-10"),onClick:s,children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:"block h-6 m-3 fill-current",children:(0,r.jsx)("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})})})}var m=s(9008),u=s.n(m),h=s(4298),x=s.n(h);function p(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x(),{id:"tag-manager",src:"https://www.googletagmanager.com/gtag/js?id=G-VDMR617ED6",strategy:"afterInteractive"}),(0,r.jsx)(x(),{id:"run-tag-manager",strategy:"afterInteractive",children:"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n\n            gtag('config', 'G-VDMR617ED6');\n        "})]})}function g(e){let{pages:t=[],rightPages:s=[["About","/about"],["Settings","/settings"]],title:a}=e,m=(0,o.useRouter)(),[h,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{(0,l.Aj)(c.I,e=>{x(e)})},[]);let[g,f]=(0,i.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(u(),{children:[(0,r.jsx)("title",{children:a?a+" | MO Checklist":"MO Checklist"}),(0,r.jsx)(p,{})]}),(0,r.jsx)(d,{}),(0,r.jsxs)("nav",{className:"bg-gray-800",children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,r.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>f(!g),children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,r.jsx)("svg",{className:"h-6 w-6 "+(g?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,r.jsx)("svg",{className:"h-6 w-6 "+(g?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center text-white font-bold text-2xl",children:(0,r.jsx)(n(),{href:"/",children:"MO Checklist"})}),(0,r.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,r.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[s,a]=e;return(0,r.jsx)(n(),{href:a,className:(m.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":m.pathname==a?"page":void 0,children:s},t)}),(0,r.jsx)("div",{className:"flex-auto"}),s.map((e,t)=>{let[s,a]=e;return(0,r.jsx)(n(),{href:a,className:(m.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":m.pathname==a?"page":void 0,children:s},t)}),h?(0,r.jsx)("div",{className:"text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium ml-2",onClick:()=>{(0,l.w7)(c.I)},children:"Sign Out"}):(0,r.jsx)(n(),{href:"/login",className:"text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium ml-2","aria-current":"/login"==m.pathname?"page":void 0,children:"Log In"})]})})]})]})}),(0,r.jsx)("div",{className:"md:hidden"+(g?"":" hidden"),id:"mobile-menu",children:(0,r.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[[...t,...s].map((e,t)=>{let[s,a]=e;return(0,r.jsx)(n(),{href:a,className:(m.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":m.pathname==a?"page":void 0,children:s},t)}),h?(0,r.jsx)("div",{className:"text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium",onClick:()=>{(0,l.w7)(c.I)},children:"Sign Out"}):(0,r.jsx)(n(),{href:"/login",className:"text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium","aria-current":"/login"==m.pathname?"page":void 0,children:"Log In"})]})})]})]})}},1481:function(e,t,s){"use strict";s.d(t,{I:function(){return i},db:function(){return l}});var r=s(3977),a=s(1259),n=s(1019);let o=(0,r.ZF)({apiKey:"AIzaSyC8G0tLL7H6w9w3YqnjIGhbXAEMAiL9vNQ",authDomain:"mo-checklist-1af5a.firebaseapp.com",databaseURL:"https://mo-checklist-1af5a-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mo-checklist-1af5a",storageBucket:"mo-checklist-1af5a.appspot.com",messagingSenderId:"631371770726",appId:"1:631371770726:web:c4188102090cd82e3cf6a7",measurementId:"G-VDMR617ED6"}),i=(0,a.v0)(o),l=(0,n.N8)(o)},7702:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(5893),a=s(3425),n=s(8965);s(1664);var o=s(7294),i=s(1259),l=s(1481),c=s(7536),d=s(3067),m=s(1163),u=s(1019);function h(){var e,t,s;let h=(0,m.useRouter)(),[x,p]=(0,o.useState)(null),[g,f]=(0,o.useState)(!1),[w,y]=(0,o.useState)({}),{register:v,formState:{errors:b},handleSubmit:j,setValue:N}=(0,c.cI)({defaultValues:{competitions:n.Z.map(e=>e.shortname)}}),k=async e=>{try{await (0,i.ck)(l.I.currentUser,{displayName:e.name});let t={};for(let s of(t["profile/".concat(l.I.currentUser.uid,"/displayName")]=e.name,n.Z))e.competitions.includes(s.shortname)?w[s.shortname]&&(t["profile/".concat(l.I.currentUser.uid,"/hiddenContests/").concat(s.shortname)]=null):w[s.shortname]||(t["profile/".concat(l.I.currentUser.uid,"/hiddenContests/").concat(s.shortname)]=!0);await (0,u.Vx)((0,u.iH)(l.db),t)}catch(e){console.log(e)}h.reload()};(0,o.useEffect)(()=>{(0,i.Aj)(l.I,e=>{e&&(console.log("run"),p(e),N("name",e.displayName||""),(0,u.jM)((0,u.iH)(l.db,"profile/"+e.uid+"/hiddenContests"),e=>{if(!e.exists())return;y(e.val()||{});let t=[];for(let s of n.Z)e.val()[s.shortname]||t.push(s.shortname);N("competitions",t)},{onlyOnce:!0}))})},[N]);let[P,I]=(0,o.useState)(null),{register:C,formState:{errors:L},handleSubmit:S,setValue:M}=(0,c.cI)(),_=e=>{(0,i.e5)(l.I,x.email,e.oldPassword).then(()=>{(0,i.gQ)(l.I.currentUser,e.newPassword).then(()=>{h.reload()}).catch(e=>{console.log(e),I("An error occurred. Please try again.")})}).catch(e=>{console.log(e),I("An error occurred. Please try again.")})};return(0,r.jsxs)("main",{children:[(0,r.jsx)(a.Z,{title:"Settings"}),(0,r.jsx)("div",{className:"py-4 px-12",children:(0,r.jsx)("h1",{className:"font-bold text-3xl text-center",children:"Settings"})}),x?(0,r.jsxs)("div",{className:"py-4 px-12",children:[(0,r.jsx)("h2",{className:"font-bold text-2xl text-center",children:"Profile"}),(0,r.jsx)("div",{className:"space-y-2 max-w-md mx-auto",children:(0,r.jsxs)("form",{className:"mx-auto my-4",onSubmit:j(k),children:[(0,r.jsx)("h3",{className:"font-bold text-xl text-center mt-4 mb-2",children:"Display Name"}),(0,r.jsx)("input",{...v("name"),id:"name",type:"text",className:"rounded-md relative block w-full border-0 px-2 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Name"}),(0,r.jsx)("h3",{className:"font-bold text-xl text-center mt-4 mb-2",children:"My Competitions"}),n.Z.map(e=>(0,r.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,r.jsx)("input",{type:"checkbox",id:e.shortname.toLowerCase(),...v("competitions"),value:e.shortname},e.name),(0,r.jsx)("label",{htmlFor:e.shortname.toLowerCase(),children:e.name})]},e.shortname)),(0,r.jsx)(d.Z,{className:"mt-2",props:{type:"submit"},full:!0,children:"Save"})]})}),(0,r.jsx)("h2",{className:"font-bold text-2xl text-center",children:"Set a New Password"}),(0,r.jsx)("div",{className:"space-y-2 max-w-md mx-auto",children:(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:S(_),noValidate:!0,children:[(0,r.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"oldPassword",className:"sr-only",children:"Old Password"}),(0,r.jsx)("input",{...C("oldPassword",{minLength:{value:8,message:"Password must have at least 8 characters."},maxLength:{value:20,message:"Password must have less than 20 characters."},required:"Password is required."}),id:"oldPassword",type:"password",autoComplete:"password",required:!0,className:"rounded-t-md relative block w-full border-0 px-2 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Old Password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newpassword",className:"sr-only",children:"Password"}),(0,r.jsx)("input",{...C("newPassword",{minLength:{value:8,message:"Password must have at least 8 characters."},maxLength:{value:20,message:"Password must have less than 20 characters."},required:"Password is required."}),id:"newpassword",type:"password",autoComplete:"password",required:!0,className:"relative block w-full border-0 px-2 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"New Password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,r.jsx)("input",{...C("confirmPassword",{validate:{validateSamePassword:(e,t)=>e===t.newPassword||"Passwords do not match."}}),id:"confirmPassword",type:"password",autoComplete:"password",required:!0,className:"rounded-b-md relative block w-full border-0 px-2 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Confirm Password"})]})]}),(0,r.jsx)("div",{className:"text-red-500",children:(0,r.jsx)("div",{children:(null==L?void 0:null===(e=L.oldPassword)||void 0===e?void 0:e.message)||(null==L?void 0:null===(t=L.newPassword)||void 0===t?void 0:t.message)||(null==L?void 0:null===(s=L.confirmPassword)||void 0===s?void 0:s.message)||P})}),(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{className:"mt-2",props:{type:"submit"},full:!0,children:"Change Password"})})]})})]}):(0,r.jsx)("div",{className:"m-2 text-center",children:"You must be logged in to view this page."})]})}}},function(e){e.O(0,[627,70,462,536,774,888,179],function(){return e(e.s=2837)}),_N_E=e.O()}]);